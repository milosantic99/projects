<!DOCTYPE HTML>

<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Chat App</title>
    <th:block th:include="fragments/common.html :: headerfiles"></th:block>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
          crossorigin="anonymous">
</head>

<body>
<div class="container">
    <div class="py-5 text-center">
        <h2>Chat App</h2>
    </div>
    <div class="row">
        <div class="col-md-7">
            <div class="row">
                <div class="mb-3">
                    <div class="btn-group">
                        <button style="display: none;" type="button" id="connect" class="btn btn-sm btn-outline-secondary"
                                onclick="connect()">Connect</button>
                        <button style="display: none;" type="button" id="disconnect"
                                class="btn btn-sm btn-outline-secondary"
                                onclick="disconnect()" disabled>Disconnect</button>
                    </div>
                </div>
                <div class="mb-3" id="users" style="display: none;">
                    <span id="active-users-span"></span>
                    <ul id="active-users" class="list-group list-group-horizontal-sm">

                    </ul>
                </div>
                <div id="divSelectedUser" class="mb-3" style="display: none;">
                    <span id="selectedUser" class="badge badge-secondary"></span> Selected
                </div>
                <div  id="accessTokenDiv"  class="mb-3">
                    <input type="text" id="my_access_token" class="form-control" placeholder="Your access token">
                    <br>
                    <button type="button" class="btn btn-sm btn-outline-secondary"
                            onclick="next()">Next</button>
                </div>
                <div class="mb-3">
                    <div class="input-group" id="sendmessage" style="display: none;">
                        <div class="col-7" id="conndata">
                            <br>
                            <div id="privateChatData">
                                <input type="text" id="recipientid" class="form-control"
                                       placeholder="Recipient (userID for new / chatId for existing chat)">
                            </div>
                            <br>
                            <div id="groupChatData" style="display: none;">
                                <input type="text" id="groupid" class="form-control"
                                       placeholder="Group ID (leave blank for new group)">
                            </div>
                        </div>
                        <br>
                        <div id="msg" style="display: none;">
                            <input type="text" id="message" class="form-control" placeholder="Message">
                            <br>
                            <br>
                            <div class="input-group-append">
                                <button id="send" class="btn btn-primary" onclick="send()">Send</button>
                            </div>
                        </div>
                        <br>
                    </div>
                </div>
            </div>
            <div class="row" id="actionDiv" style="display: none;">
                <span id="action" class="col-3">Create new room</span>
                <button type="button" class="btn btn-sm btn-outline-secondary col-4"
                        onclick="toggleAction()">Toggle</button>
            </div>
            <br>
            <div id="chatTypeDiv" class="row" style="display: none;">
                <button type="button" id="toggle" class="btn btn-sm btn-outline-secondary"
                        onclick="toggle()">Switch to group chat</button>
            </div>
        </div>

        <div class="col-md-5">
            <div id="content"></div>
<!--            <div>-->
<!--                <span class="float-right">-->
<!--                    <button id="clear" class="btn btn-primary" onclick="clearMessages()" style="display: none;">Clear</button>-->
<!--                </span>-->
<!--            </div>-->
            <div id="response"></div>
        </div>
    </div>
</div>

<footer th:insert="fragments/common.html :: footer"></footer>

<script src = "https://ajax.aspnetCDN.com/ajax/jQuery/jQuery-3.3.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script type="text/javascript" src="js/websockets.js"></script>
</body>
</html>